(function(){"use strict";var e={6296:function(e,t,o){var a=o(9242),s=o(3396);function r(e,t,o,a,r,l){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(n)}var l={setup(){(0,s.bv)((()=>{console.log("app")}))}},n=o(89);const i=(0,n.Z)(l,[["render",r]]);var d=i,c=o(2483);const u={id:"layout-wrapper"},p={class:"main-content"},m={class:"page-content"},h={class:"container-fluid"},f=(0,s.uE)('<div class="row"><div class="col-12"><div class="page-title-box d-sm-flex align-items-center justify-content-between"><h4 class="mb-sm-0 font-size-18">File Manager</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Apps</a></li><li class="breadcrumb-item active">File Manager</li></ol></div></div></div></div>',1),g={class:"d-xl-flex"},w={class:"w-100"},b={class:"d-md-flex"};function v(e,t,o,a,r,l){const n=(0,s.up)("the-header"),i=(0,s.up)("the-left-side-bar"),d=(0,s.up)("the-main-content");return(0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(n),(0,s._)("div",p,[(0,s._)("div",m,[(0,s._)("div",h,[f,(0,s._)("div",g,[(0,s._)("div",w,[(0,s._)("div",b,[(0,s.Wm)(i,{onShowTrash:a.showTrash},null,8,["onShowTrash"]),(0,s.Wm)(d,{isShowTrash:a.isTrashContentVisible},null,8,["isShowTrash"])])])])])])])])}var y=o(7139);const _={id:"page-topbar"},S={class:"navbar-header"},x=(0,s.uE)('<div class="col-3"></div><div class="d-flex col-6"><form class="app-search d-none d-lg-block w-75"><div class="position-relative search w-100"><input type="text" class="form-control" placeholder="Search..."><span class="bx bx-search-alt"></span></div></form></div>',2),k={class:"d-flex col-3 ml-auto"},F=(0,s.uE)('<div class="dropdown d-inline-block d-lg-none ms-2"><button type="button" class="btn header-item noti-icon waves-effect" id="page-header-search-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="mdi mdi-magnify"></i></button><div class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-0" aria-labelledby="page-header-search-dropdown"><form class="p-3"><div class="form-group m-0"><div class="input-group"><input type="text" class="form-control" placeholder="Search ..." aria-label="Recipient&#39;s username"><div class="input-group-append"><button class="btn btn-primary" type="submit"><i class="mdi mdi-magnify"></i></button></div></div></div></form></div></div>',1),C={key:0,style:{"line-height":"70px"},class:"text-center align-item-center"},A={key:1,class:"dropdown d-inline-block"},D={type:"button",class:"btn header-item waves-effect",id:"page-header-user-dropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},R=(0,s._)("img",{class:"rounded-circle header-profile-user",src:"https://i.pinimg.com/originals/2b/0f/7a/2b0f7a9533237b7e9b49f62ba73b95dc.jpg",alt:"Header Avatar"},null,-1),I={class:"d-none d-xl-inline-block ms-1",key:"t-henry"},M={class:"dropdown-menu dropdown-menu-end"},B=(0,s._)("a",{class:"dropdown-item",href:"#"},[(0,s._)("i",{class:"bx bx-user font-size-16 align-middle me-1"}),(0,s._)("span",{key:"t-profile"},"Profile")],-1),L=(0,s._)("div",{class:"dropdown-divider"},null,-1),U={class:"dropdown-item text-danger",href:"#"},P=(0,s._)("i",{class:"bx bx-power-off font-size-16 align-middle me-1 text-danger"},null,-1),j=(0,s._)("div",{class:"dropdown d-inline-block"},[(0,s._)("button",{type:"button",class:"btn header-item noti-icon right-bar-toggle waves-effect"},[(0,s._)("i",{class:"bx bx-cog bx-spin"})])],-1);function z(e,t,o,a,r,l){const n=(0,s.up)("router-link"),i=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("header",_,[(0,s._)("div",S,[x,(0,s._)("div",k,[F,a.user?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",C,[(0,s.Wm)(n,{class:"text-dark text-decoration-none btn btn-outline-info",to:"/login"},{default:(0,s.w5)((()=>[(0,s.Uk)("Sign In")])),_:1})])),a.user?((0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("button",D,[R,(0,s._)("span",I,(0,y.zw)(a.user.name),1),(0,s.Wm)(i,{class:"d-none d-xl-inline-block",type:"mdi",path:a.downIcon},null,8,["path"])]),(0,s._)("div",M,[B,L,(0,s._)("a",U,[P,(0,s._)("span",{key:"t-logout",onClick:t[0]||(t[0]=(...e)=>a.handleLogout&&a.handleLogout(...e))},"Logout")])])])):(0,s.kq)("",!0),j])])])}var T=o(4870),O=o(65),H=o(8651),N=o(6526),E={components:{SvgIcon:H.Z},setup(){const e=(0,T.iH)(N.CW),t=(0,O.oR)(),o=(0,c.tv)(),a=(0,s.Fl)((()=>t.state.auth.userLogin));function r(){t.dispatch("auth/logoutAction",o)}return t.dispatch("auth/loadUserAction"),{user:a,handleLogout:r,downIcon:e}}};const $=(0,n.Z)(E,[["render",z]]);var W=$;const J=e=>((0,s.dD)("data-v-f0215d2c"),e=e(),(0,s.Cn)(),e),q={class:"card filemanager-sidebar me-md-2"},V={class:"card-body"},Z={class:"d-flex flex-column h-100"},G={class:"mb-4"},X={class:"mb-3"},Y={class:"dropdown"},K={class:"btn btn-light w-100",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","data-bs-target":"#createFolderModal"},Q={class:"dropdown-menu w-100",style:{}},ee=J((()=>(0,s._)("label",{for:"folder",class:"dropdown-item"},[(0,s._)("i",{class:"bx bx-folder me-1"}),(0,s.Uk)("Upload folder ")],-1))),te=J((()=>(0,s._)("label",{for:"file",class:"dropdown-item"},[(0,s._)("i",{class:"bx bx-file me-1"}),(0,s.Uk)("Upload file ")],-1))),oe=J((()=>(0,s._)("input",{style:{visibility:"hidden"},class:"d-none",name:"newFolder"},null,-1))),ae={type:"button",class:"btn btn-light bg-white border-0 w-100 text-left p-0 text-start","data-bs-toggle":"modal","data-bs-target":"#createFolderModal"},se={for:"newFolder",class:"dropdown-item text-left"},re={class:"list-unstyled categories-list"},le={class:"custom-accordion"},ne={class:"text-body fw-medium py-1 d-flex align-items-center text-decoration-none collapsed","data-bs-toggle":"collapse",href:"#categories-collapse",role:"button","aria-expanded":"false","aria-controls":"categories-collapse"},ie={href:"javascript: void(0);",class:"text-body d-flex align-items-center text-decoration-none"},de=J((()=>(0,s._)("span",{class:"me-auto"},"Starred",-1))),ce={href:"javascript: void(0);",class:"text-body d-flex align-items-center text-decoration-none"},ue=J((()=>(0,s._)("span",{class:"me-auto"},"Trash",-1)));function pe(e,t,o,a,r,l){const n=(0,s.up)("svg-icon"),i=(0,s.up)("ProgressUpload"),d=(0,s.up)("ModalCreateFolderVue");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",q,[(0,s._)("div",V,[(0,s._)("div",Z,[(0,s._)("div",G,[(0,s._)("div",X,[(0,s._)("div",Y,[(0,s._)("button",K,[(0,s.Wm)(n,{type:"mdi",path:a.plusIcon},null,8,["path"]),(0,s.Uk)(" Create New ")]),(0,s._)("div",Q,[(0,s._)("input",{multiple:"",type:"file",id:"folder",name:"folder",style:{visibility:"hidden"},class:"d-none",webkitdirectory:"",directory:"",onChange:t[0]||(t[0]=(...e)=>a.handleUploadFolder&&a.handleUploadFolder(...e))},null,32),ee,(0,s._)("input",{onChange:t[1]||(t[1]=(...e)=>a.handleUploadFile&&a.handleUploadFile(...e)),multiple:"",type:"file",id:"file",name:"files",style:{visibility:"hidden"},class:"d-none",ref:"files"},null,544),te,oe,(0,s._)("button",ae,[(0,s._)("label",se,[(0,s.Wm)(n,{style:{width:"18px",height:"18px"},class:"bx m-0",type:"mdi",path:a.plusIcon},null,8,["path"]),(0,s.Uk)(" Create folder ")])])])])]),(0,s._)("ul",re,[(0,s._)("li",{onClick:t[2]||(t[2]=(...e)=>a.getRootFile&&a.getRootFile(...e))},[(0,s._)("div",le,[(0,s._)("a",ne,[(0,s.Wm)(n,{class:"text-warning pl-2 font-size-16 me-2",type:"mdi",path:a.folderIcon},null,8,["path"]),(0,s.Uk)(" Files ")])])]),(0,s._)("li",{onClick:t[3]||(t[3]=(...e)=>a.handleGetStarred&&a.handleGetStarred(...e))},[(0,s._)("a",ie,[(0,s.Wm)(n,{class:"font-size-16 me-2",type:"mdi",path:a.starIcon},null,8,["path"]),de])]),(0,s._)("li",{onClick:t[4]||(t[4]=(...e)=>a.getTrashAll&&a.getTrashAll(...e))},[(0,s._)("a",ce,[(0,s.Wm)(n,{class:"font-size-16 me-2 text-danger",type:"mdi",path:a.trashIcon},null,8,["path"]),ue])])])])])])]),((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s.Wm)(i,{uploadProgress:a.uploadProgress},null,8,["uploadProgress"])])),(0,s.Wm)(d)],64)}o(560);const me={class:"modal fade",id:"createFolderModal",tabindex:"-1","aria-labelledby":"createFolderModalLabel","aria-hidden":"true"},he={class:"modal-dialog modal-dialog-centered"},fe={class:"modal-content"},ge=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"createFolderModalLabel"}," Create New Folder "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),we={class:"modal-body"},be={class:"mb-3"},ve=(0,s._)("label",{for:"folder-name",class:"col-form-label"},"Name:",-1),ye=(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,s._)("button",{type:"submit","data-bs-dismiss":"modal",class:"btn btn-primary"}," Create ")],-1);function _e(e,t,o,r,l,n){return(0,s.wg)(),(0,s.iD)("div",me,[(0,s._)("div",he,[(0,s._)("div",fe,[ge,(0,s._)("form",{onSubmit:t[1]||(t[1]=(0,a.iM)(((...e)=>r.handleCreateFolder&&r.handleCreateFolder(...e)),["prevent"])),ref:"formFolder"},[(0,s._)("div",we,[(0,s._)("div",be,[ve,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"folder-name",name:"name","onUpdate:modelValue":t[0]||(t[0]=e=>r.formData.name=e)},null,512),[[a.nr,r.formData.name]])])]),ye],544)])])])}var Se=o(2492),xe=o.n(Se),ke={setup(){const e=(0,O.oR)(),t=(0,c.yj)(),o=(0,T.qj)({name:"",parent_id:null});function a(){o.parent_id=t.params.id,e.dispatch("file/createFolderAction",{formData:o,Swal:xe()}),o.name=""}return{formData:o,handleCreateFolder:a}}};const Fe=(0,n.Z)(ke,[["render",_e]]);var Ce=Fe;const Ae=e=>((0,s.dD)("data-v-3fa6ebe3"),e=e(),(0,s.Cn)(),e),De={key:0,class:"wrapper p-0 w-25 text-center"},Re=Ae((()=>(0,s._)("p",{style:{display:"inline-block"},class:"text-dark fw-bold m-0"},"Upoading",-1))),Ie=Ae((()=>(0,s._)("div",{class:"dot"},".",-1))),Me=Ae((()=>(0,s._)("div",{class:"dot"},".",-1))),Be=Ae((()=>(0,s._)("div",{class:"dot"},".",-1))),Le={class:"progress m-3 w-75 mx-auto",style:{height:"7px",width:"100px"}};function Ue(e,t,o,a,r,l){return o.uploadProgress?((0,s.wg)(),(0,s.iD)("div",De,[Re,Ie,Me,Be,(0,s._)("div",Le,[(0,s._)("div",{class:"progress-bar text-center",role:"progressbar",style:(0,y.j5)({width:o.uploadProgress+"%"}),"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"},null,4)])])):(0,s.kq)("",!0)}var Pe={props:{uploadProgress:{type:Number,required:!0}}};const je=(0,n.Z)(Pe,[["render",Ue],["__scopeId","data-v-3fa6ebe3"]]);var ze=je,Te={components:{SvgIcon:H.Z,ModalCreateFolderVue:Ce,ProgressUpload:ze},setup(e,{emit:t}){const o=(0,T.iH)(N.qX5),a=(0,T.iH)(N.in3),s=(0,T.iH)(N._kL),r=(0,T.iH)(N.KCi),l=(0,T.iH)(N.j43),n=(0,O.oR)(),i=(0,c.yj)(),d=(0,c.tv)();let u=!1;const p=(0,T.iH)(0);function m(e){const t=e.target.files;let o=new FormData;console.log("formData");const a=i.params;for(var s=0;s<t.length;s++){let e=t[s];o.append("files["+s+"]",e)}n.dispatch("file/uploadFileAction",{formData:o,uploadProgress:p,parentFolder:a})}function h(e){const t=e.target.files;let o=new FormData;const a=i.params;for(var s=0;s<t.length;s++){let e=t[s];o.append("files["+s+"]",e),o.append("relative_paths["+s+"]",t[s].webkitRelativePath)}n.dispatch("file/uploadFolderAction",{formData:o,parentFolder:a,uploadProgress:p})}function f(){u=!0,t("showTrash",u),n.dispatch("file/getTrashAction",d)}function g(){u=!1,t("showTrash",u),d.push("/"),n.dispatch("file/getRootFileAction",d)}function w(){n.dispatch("file/getStarredAction")}return{plusIcon:o,folderIcon:a,shareIcon:s,starIcon:r,trashIcon:l,handleUploadFile:m,handleUploadFolder:h,getTrashAll:f,getRootFile:g,uploadProgress:p,handleGetStarred:w}}};const Oe=(0,n.Z)(Te,[["render",pe],["__scopeId","data-v-f0215d2c"]]);var He=Oe;const Ne=e=>((0,s.dD)("data-v-274a3afe"),e=e(),(0,s.Cn)(),e),Ee={class:"w-100"},$e={class:"card wrap"},We={class:"card-body"},Je={class:"row mb-3 justify-content-between"},qe={class:"col-xl-5 col-sm-3"},Ve={class:"m-0"},Ze={class:"col-xl-7 d-flex justify-content-around"},Ge={key:0,class:"col-xl-3 col-sm-3 w-25"},Xe={key:1,class:"col-xl-3 col-sm-3"},Ye={key:2,class:"col-xl-3 col-sm-3"},Ke={key:3,class:"col-xl-2 col-sm-3 w-25"},Qe={key:4,class:"col-xl-2 col-sm-3 w-25"},et={class:"mt-4"},tt={class:"table-responsive overflow-hidden table-fix"},ot={class:"table align-middle table-nowrap table-hover mb-0"},at={ref:"th"},st=Ne((()=>(0,s._)("th",{scope:"col"},"Name",-1))),rt=Ne((()=>(0,s._)("th",{scope:"col"},"Date modified",-1))),lt=Ne((()=>(0,s._)("th",{scope:"col",colspan:"2"},"Size",-1)));function nt(e,t,o,a,r,l){const n=(0,s.up)("svg-icon"),i=(0,s.up)("list-file"),d=(0,s.up)("ModalShare");return(0,s.wg)(),(0,s.iD)("div",Ee,[(0,s._)("div",$e,[(0,s._)("div",We,[(0,s._)("div",null,[(0,s._)("div",Je,[(0,s._)("div",qe,[(0,s._)("div",{class:"mt-6 h-100 d-flex align-items-center btn",onClick:t[0]||(t[0]=(...e)=>a.changeDirectoryFolder&&a.changeDirectoryFolder(...e))},[(0,s._)("h5",Ve,[(0,s.Wm)(n,{class:"fs-1",type:"mdi",path:a.mdiHomeAccount},null,8,["path"]),(0,s.Uk)(" My Files ")])])]),(0,s._)("div",Ze,[o.isShowTrash||o.isShareView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ge,[(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>a.handleDeleteFile&&a.handleDeleteFile(...e)),class:"btn btn-light border border-dark px-3 py-2"},[(0,s.Wm)(n,{type:"mdi",path:a.mdiTrashCan},null,8,["path"]),(0,s.Uk)(" Delete ")])])),o.isShowTrash||o.isShareView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Xe,[(0,s._)("button",{"data-bs-toggle":"modal","data-bs-target":"#shareModal",onClick:t[2]||(t[2]=(...e)=>a.handleShare&&a.handleShare(...e)),class:"btn btn-light border border-dark px-3 py-2"},[(0,s.Wm)(n,{type:"mdi",path:a.mdiShareVariantOutline},null,8,["path"]),(0,s.Uk)(" Share ")])])),o.isShowTrash?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ye,[(0,s._)("button",{onClick:t[3]||(t[3]=(...e)=>a.download&&a.download(...e)),class:"btn btn-light border border-dark px-2 py-2"},[(0,s.Wm)(n,{type:"mdi",path:a.mdiDownload},null,8,["path"]),(0,s.Uk)(" Download ")])])),o.isShowTrash?((0,s.wg)(),(0,s.iD)("div",Ke,[(0,s._)("button",{onClick:t[4]||(t[4]=(...e)=>a.handleRestore&&a.handleRestore(...e)),class:"btn btn-light border border-dark px-3 py-2"},[(0,s.Wm)(n,{type:"mdi",path:a.mdiRestore},null,8,["path"]),(0,s.Uk)(" Restore ")])])):(0,s.kq)("",!0),o.isShowTrash?((0,s.wg)(),(0,s.iD)("div",Qe,[(0,s._)("button",{onClick:t[5]||(t[5]=(...e)=>a.deleteFilePermanently&&a.deleteFilePermanently(...e)),class:"btn btn-light border border-dark px-3 py-2"},[(0,s.Wm)(n,{type:"mdi",path:a.mdiTrashCan},null,8,["path"]),(0,s.Uk)(" Delete ")])])):(0,s.kq)("",!0)])])]),(0,s._)("div",et,[(0,s._)("div",tt,[(0,s._)("table",ot,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",at,null,512),st,rt,lt])]),(0,s._)("tbody",null,[(0,s.Wm)(i,{onHandleSelectedFolder:a.handleSelectFolder,onHandleSelectedFile:a.handleSelectFile,onResetSelection:a.resetSelection,checkAll:e.isChecked},null,8,["onHandleSelectedFolder","onHandleSelectedFile","onResetSelection","checkAll"])])])])])])]),(0,s.Wm)(d,{link_share:a.linkShare,isShowModalShare:e.isShowModalShare},null,8,["link_share","isShowModalShare"])])}function it(e,t,o,a,r,l){const n=(0,s.up)("folder-item"),i=(0,s.up)("file-item");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.FolderList,(e=>((0,s.wg)(),(0,s.j4)(n,{key:e.id,folder:e,onHandleSelectedFolder:a.handleSelectedFolder},null,8,["folder","onHandleSelectedFolder"])))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.fileList,(e=>((0,s.wg)(),(0,s.j4)(i,{file:e,key:e.id,onHandleSelectedFile:a.handleSelectedFile},null,8,["file","onHandleSelectedFile"])))),128)),(0,s._)("p",null,(0,y.zw)(o.checkAll),1)],64)}const dt={href:"javascript: void(0);",class:"text-dark fw-medium text-decoration-none"};function ct(e,t,o,r,l,n){const i=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("tr",{class:(0,y.C_)({selected:r.item.isSelected}),onClick:t[2]||(t[2]=e=>r.handleSelectedFile(r.item))},[(0,s._)("td",{class:"text-end wrapper-star",onClick:t[1]||(t[1]=(0,a.iM)((()=>{}),["stop"]))},[r.isShowStar?((0,s.wg)(),(0,s.j4)(i,{key:0,onClick:t[0]||(t[0]=e=>r.handleStarred(r.item)),class:(0,y.C_)(r.starred),type:"mdi",path:r.mdiStar},null,8,["class","path"])):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("a",dt,[(0,s.Wm)(i,{class:(0,y.C_)(["font-size-16 align-middle me-2",r.getColor(r.item.mime)]),type:"mdi",path:r.item.isSelected?r.mdiCheck:r.getIconMimeType(r.item.mime)},null,8,["path","class"]),(0,s.Uk)(" "+(0,y.zw)(r.item.name),1)])]),(0,s._)("td",null,(0,y.zw)(r.getFormattedDate(r.item.created_at)),1),(0,s._)("td",null,(0,y.zw)(r.item.size),1)],2)}var ut=o(9662),pt=o.n(ut),mt={emits:["handleSelectedFile"],components:{SvgIcon:H.Z},props:{file:{type:Object,required:!0}},setup(e,{emit:t}){const o=(0,T.qj)(e.file),a=(0,O.oR)(),r=(0,s.f3)("isShowStar")??!0,l=(0,s.Fl)((()=>o.is_starred?"text-starred":"text-secondary"));function n(e){const t=new Date(e),o=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return this.formattedDate=`${o}/${a}/${s}`}function i(e){switch(e){case"html":return N.P2t;case"doc":case"docx":return N.wEm;case"xlsx":return N.Wee;case"ppt":return N.GR1;case"PNG":case"JPG":return N.x$J;case"pdf":return N.omO;case"txt":return N.eLz;default:return N.P2t}}function d(e){switch(e){case"html":return"text-primary";case"doc":case"docx":return"text-primary";case"xlsx":return"text-success";case"ppt":return"text-danger";case"PNG":case"JPG":return"text-success";case"pdf":return"text-danger";case"txt":return"text-dark";default:return"text-dark"}}function c(e){e.isSelected=!e.isSelected,t("handleSelectedFile",e)}function u(e){a.dispatch("file/deleteFileAction",{fileIds:[e],Swal:pt()})}function p(e){a.dispatch("file/toggleStarFileAction",e)}return(0,s.YP)(e.file,(e=>{console.log("aaa"),o.value=e})),{item:o,getFormattedDate:n,getIconMimeType:i,mdiDotsHorizontal:N.XMI,getColor:d,mdiStar:N.Vip,handleSelectedFile:c,mdiCheck:N.oL1,handleDeleteFile:u,starred:l,isShowStar:r,handleStarred:p}}};const ht=(0,n.Z)(mt,[["render",ct],["__scopeId","data-v-294649fe"]]);var ft=ht;const gt=e=>((0,s.dD)("data-v-7ea4cce2"),e=e(),(0,s.Cn)(),e),wt={href:"javascript: void(0);",class:"text-dark fw-medium text-decoration-none"},bt=gt((()=>(0,s._)("td",null,null,-1)));function vt(e,t,o,r,l,n){const i=(0,s.up)("svg-icon");return(0,s.wg)(),(0,s.iD)("tr",{class:(0,y.C_)({selected:r.item.isSelected}),onDblclick:t[2]||(t[2]=e=>r.changeDirectory(r.item.id)),onClick:t[3]||(t[3]=e=>r.handleSelected(r.item))},[(0,s._)("td",{class:"text-end wrapper-star",onClick:t[1]||(t[1]=(0,a.iM)((()=>{}),["stop"]))},[r.isShowStar?((0,s.wg)(),(0,s.j4)(i,{key:0,onClick:t[0]||(t[0]=e=>r.handleStarred(r.item)),class:(0,y.C_)(r.starred),type:"mdi",path:r.mdiStar},null,8,["class","path"])):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("a",wt,[(0,s.Wm)(i,{class:"font-size-16 align-middle me-2 text-warning",type:"mdi",path:r.isSelected?r.mdiCheck:r.iconFolder},null,8,["path"]),(0,s.Uk)(" "+(0,y.zw)(r.item.name),1)])]),(0,s._)("td",null,(0,y.zw)(r.getFormattedDate(o.folder.created_at)),1),bt],34)}var yt={components:{SvgIcon:H.Z},emits:["handleSelectedFolder"],props:{folder:{type:[Object]}},setup(e,{emit:t}){const o=(0,T.iH)(!1),a=(0,T.iH)(N.in3),r=(0,c.tv)(),l=(0,T.qj)(e.folder),n=(0,O.oR)(),i=(0,s.f3)("isShowStar")??!0,d=(0,s.Fl)((()=>l.is_starred?"text-starred":"text-secondary"));function u(e){const t=new Date(e),o=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();return this.formattedDate=`${o}/${a}/${s}`}function p(e){e.isSelected=!e.isSelected,t("handleSelectedFolder",e)}function m(e){r.push({name:"folderDetail",params:{id:e}})}function h(e){n.dispatch("file/toggleStarFolderAction",e)}function f(){}return{iconFolder:a,getFormattedDate:u,mdiDotsHorizontal:N.XMI,handleSelected:p,isSelected:o,mdiCheck:N.oL1,handleDeleteFolder:f,changeDirectory:m,mdiStar:N.Vip,item:l,starred:d,handleStarred:h,isShowStar:i}}};const _t=(0,n.Z)(yt,[["render",vt],["__scopeId","data-v-7ea4cce2"]]);var St=_t,xt={components:{FileItem:ft,FolderItem:St},emits:["handleSelectedFile","handleSelectedFolder"],props:{checkAll:Boolean},setup(e,{emit:t}){const o=(0,c.yj)(),a=(0,O.oR)(),r=(0,T.iH)(!1),l=o.params?.id,n=o.path.split("/")[1];if(console.log(n),"share"==n){const e=o.params.token.split(",");a.dispatch("file/getFileShare",e)}else l?a.dispatch("file/showFolderAction",l):a.dispatch("file/getRootFileAction");const i=(0,s.Fl)((()=>a.state.file.listRootFile.map((e=>({...e,isSelected:!1}))))),d=(0,s.Fl)((()=>a.state.file.listRootFolder.map((e=>({...e,isSelected:!1})))));function u(e){t("handleSelectedFile",e)}function p(e){t("handleSelectedFolder",e)}return(0,s.YP)((()=>o.params.id),((e,t)=>{e!==t&&void 0!=e?a.dispatch("file/showFolderAction",e):a.dispatch("file/getRootFileAction")})),{fileList:i,FolderList:d,handleSelectedFile:u,handleSelectedFolder:p,selectedAll:r}}};const kt=(0,n.Z)(xt,[["render",it]]);var Ft=kt;const Ct={class:"modal fade w-100",id:"shareModal",tabindex:"-1","aria-labelledby":"shareModalLabel","aria-hidden":"true",ref:"modal"},At={class:"modal-dialog modal-dialog-centered"},Dt={class:"modal-dialog"},Rt={class:"modal-content"},It=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"shareModalLabel"},"Link share"),(0,s._)("button",{type:"button",class:"btn-close btnClose","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Mt={class:"modal-body"},Bt={class:"input-group mb-3"},Lt=(0,s._)("p",{class:"copied copied-text d-none"},"copied",-1);function Ut(e,t,o,r,l,n){return(0,s.wg)(),(0,s.iD)("div",Ct,[(0,s._)("div",At,[(0,s._)("div",Dt,[(0,s._)("div",Rt,[It,(0,s._)("div",Mt,[(0,s._)("div",Bt,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Select your file","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=e=>r.link=e)},null,512),[[a.nr,r.link]]),(0,s._)("button",{onClick:t[1]||(t[1]=(...e)=>r.handleCopy&&r.handleCopy(...e)),class:"btn btn-primary",type:"button",id:"coppy"},[Lt,(0,s.Uk)(" copy ")])])])])])])],512)}var Pt={props:{link_share:{type:String}},setup(e){const t=(0,T.iH)(e.link_share);function o(){navigator.clipboard.writeText(t.value);const e=document.querySelector(".copied");e.classList.add("copied-text"),e.classList.remove("d-none")}return(0,s.YP)((()=>e.link_share),(e=>{t.value=e})),{link:t,handleCopy:o}}};const jt=(0,n.Z)(Pt,[["render",Ut]]);var zt=jt,Tt={components:{ListFile:Ft,SvgIcon:H.Z,ModalShare:zt},props:{isShowTrash:{type:Boolean},isShareView:{type:Boolean,default:!1}},setup(){const e=(0,T.iH)(N.SXi);let t=[],o=[];const a=(0,O.oR)(),s=(0,c.tv)();let r=(0,T.iH)("");function l(e){if(e.isSelected)t.push(e);else{const o=t.indexOf(e);o>-1&&t.splice(o,1)}}function n(e){if(e.isSelected)o.push(e);else{const t=o.indexOf(e);t>-1&&o.splice(t,1)}}function i(){pt().fire({title:"Are you sure to move to trash selected file?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm"}).then((e=>{e.isConfirmed&&(t.length<=0&&o.length<=0?pt().fire({icon:"error",text:"No file selected",showConfirmButton:!0}):(t.length>0&&a.dispatch("file/deleteFileAction",{files:t}),o.length>0&&a.dispatch("file/deleteFolderAction",{folders:o})),m())}))}function d(){a.dispatch("file/getRootFileAction"),s.push("/")}function u(){pt().fire({title:"Are you sure to delete permanently selected file?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm"}).then((e=>{e.isConfirmed&&(t.length<=0&&o.length<=0?pt().fire({icon:"error",text:"No file selected",showConfirmButton:!0}):a.dispatch("file/deleteFilePermanentlyAction",{files:t,folders:o,Swal:pt()}),m())}))}function p(){t.length<=0&&o.length<=0?pt().fire({icon:"error",text:"No file selected",showConfirmButton:!0}):a.dispatch("file/downloadAction",{files:t,folders:o}),m()}function m(){t=[],o=[]}function h(){pt().fire({title:"Are you sure to restore selected file?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"confirm"}).then((e=>{e.isConfirmed&&(a.dispatch("file/restoreFileAction",{files:t,folders:o}),m())}))}function f(){if(t.length<=0&&o.length<=0)r.value="";else{let e="http://localhost:8080/share/";r.value=e,t.map((e=>{r.value+=e.token_share+","})),o.map((e=>{r.value+=e.token_share+","})),r.value=r.value.substring(0,r.value.length-1)}}return{verticalIcon:e,mdiShareVariantOutline:N._kL,mdiDownload:N.OGU,mdiRestore:N.mBz,mdiTrashCan:N.QGK,mdiHomeAccount:N.ezV,handleSelectFile:l,handleDeleteFile:i,handleSelectFolder:n,changeDirectoryFolder:d,deleteFilePermanently:u,download:p,resetSelection:m,handleRestore:h,handleShare:f,linkShare:r}}};const Ot=(0,n.Z)(Tt,[["render",nt],["__scopeId","data-v-274a3afe"]]);var Ht=Ot,Nt={name:"HomeView",components:{TheHeader:W,TheLeftSideBar:He,TheMainContent:Ht},setup(){const e=(0,T.iH)(!1);function t(t){e.value=t}return console.log("home"),{showTrash:t,isTrashContentVisible:e}}};const Et=(0,n.Z)(Nt,[["render",v]]);var $t=Et;const Wt={class:"vh-98 gradient-custom"},Jt={class:"container py-5 h-100"},qt={class:"row d-flex justify-content-center align-items-center h-100"},Vt={class:"col-12 col-md-8 col-lg-6 col-xl-5"},Zt={class:"card bg-dark text-white",style:{"border-radius":"1rem"}},Gt={class:"card-body p-5 text-center"},Xt={class:"mb-md-5 mt-md-4 pb-5"},Yt=(0,s._)("h2",{class:"fw-bold mb-2 text-uppercase"},"Login",-1),Kt=(0,s._)("p",{class:"text-white-50 mb-5"}," Please enter your login and password! ",-1),Qt={class:"form-outline form-white mb-4"},eo=(0,s._)("label",{class:"form-label",for:"typeEmailX"},"Email",-1),to={class:"form-outline form-white mb-4"},oo=(0,s._)("label",{class:"form-label",for:"typePasswordX"},"Password",-1),ao=(0,s._)("p",{class:"small mb-5 pb-lg-2"},[(0,s._)("a",{class:"text-white-50",href:"#!"},"Forgot password?")],-1),so=(0,s._)("button",{class:"btn btn-outline-light btn-lg px-5",type:"submit"}," Login ",-1),ro={class:"d-flex justify-content-center text-center mt-4 pt-1"},lo=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-google",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"})],-1),no={class:"mb-0"};function io(e,t,o,r,l,n){const i=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("section",Wt,[(0,s._)("div",Jt,[(0,s._)("div",qt,[(0,s._)("div",Vt,[(0,s._)("div",Zt,[(0,s._)("div",Gt,[(0,s._)("div",Xt,[Yt,Kt,(0,s._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>r.handleLogin&&r.handleLogin(...e)),["prevent"])),method:"post"},[(0,s._)("div",Qt,[(0,s.wy)((0,s._)("input",{type:"email",name:"email",id:"typeEmailX",class:"form-control form-control-lg","onUpdate:modelValue":t[0]||(t[0]=e=>r.dataLogin.email=e)},null,512),[[a.nr,r.dataLogin.email]]),eo]),(0,s._)("div",to,[(0,s.wy)((0,s._)("input",{type:"password",id:"typePasswordX",name:"password",class:"form-control form-control-lg","onUpdate:modelValue":t[1]||(t[1]=e=>r.dataLogin.password=e)},null,512),[[a.nr,r.dataLogin.password]]),oo]),ao,so],32),(0,s._)("div",ro,[(0,s._)("a",{class:"text-white text-decoration-none cursor-pointer",onClick:t[3]||(t[3]=(...e)=>r.redirectGoogleLoginAction&&r.redirectGoogleLoginAction(...e))},[lo,(0,s.Uk)(" login with google")])])]),(0,s._)("div",null,[(0,s._)("p",no,[(0,s.Uk)(" Don't have an account? "),(0,s.Wm)(i,{class:"text-white-50 fw-bold",to:"/register"},{default:(0,s.w5)((()=>[(0,s.Uk)("Sign Up")])),_:1})])])])])])])])])}var co={components:{},setup(){const e=(0,c.tv)(),t=(0,O.oR)(),o=(0,s.Fl)((()=>t.state.auth.messageErrLogin)),a=(0,T.qj)({email:"",password:""});function r(){t.dispatch("auth/loginUserAction",{dataLogin:a,router:e})}function l(){t.dispatch("auth/redirectGoogleLoginAction")}return{dataLogin:a,handleLogin:r,message:o,redirectGoogleLoginAction:l}}};const uo=(0,n.Z)(co,[["render",io]]);var po=uo;const mo={class:"vh-98 gradient-custom"},ho={class:"container py-5 h-100"},fo={class:"row d-flex justify-content-center align-items-center h-100"},go={class:"col-12 col-md-8 col-lg-6 col-xl-5"},wo={class:"card bg-dark text-white",style:{"border-radius":"1rem"}},bo={class:"card-body p-5 text-center"},vo={class:"mb-md-5 mt-md-4 pb-5"},yo=(0,s._)("h2",{class:"fw-bold mb-2 text-uppercase"},"Register",-1),_o=(0,s._)("p",{class:"text-white-50 mb-5"},"Please enter your information!",-1),So={class:"form-outline form-white mb-4"},xo={key:0,class:"text-danger"},ko=(0,s._)("label",{class:"form-label",for:"typeEmailX"},"Name",-1),Fo={class:"form-outline form-white mb-4"},Co={key:0,class:"text-danger"},Ao=(0,s._)("label",{class:"form-label",for:"typeEmailX"},"Email",-1),Do={class:"form-outline form-white mb-4"},Ro={key:0,class:"text-danger"},Io=(0,s._)("label",{class:"form-label",for:"typePasswordX"},"Password",-1),Mo={class:"form-outline form-white mb-4"},Bo={key:0,class:"text-danger"},Lo=(0,s._)("label",{class:"form-label",for:"typePasswordX"},"Confirm password",-1),Uo=(0,s._)("button",{class:"btn btn-outline-light btn-lg px-5",type:"submit"}," Register ",-1);function Po(e,t,o,r,l,n){return(0,s.wg)(),(0,s.iD)("section",mo,[(0,s._)("div",ho,[(0,s._)("div",fo,[(0,s._)("div",go,[(0,s._)("div",wo,[(0,s._)("div",bo,[(0,s._)("div",vo,[yo,_o,(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)(((...e)=>r.handleRegister&&r.handleRegister(...e)),["prevent"])),method:"post"},[(0,s._)("div",So,[r.errors.name?((0,s.wg)(),(0,s.iD)("small",xo,(0,y.zw)(r.errors.name[0]),1)):(0,s.kq)("",!0),(0,s.wy)((0,s._)("input",{type:"text",id:"typeEmailX","onUpdate:modelValue":t[0]||(t[0]=e=>r.userRegister.name=e),class:"form-control form-control-lg"},null,512),[[a.nr,r.userRegister.name]]),ko]),(0,s._)("div",Fo,[r.errors.email?((0,s.wg)(),(0,s.iD)("small",Co,(0,y.zw)(r.errors.email[0]),1)):(0,s.kq)("",!0),(0,s.wy)((0,s._)("input",{type:"email",id:"typeEmailX",class:"form-control form-control-lg","onUpdate:modelValue":t[1]||(t[1]=e=>r.userRegister.email=e)},null,512),[[a.nr,r.userRegister.email]]),Ao]),(0,s._)("div",Do,[r.errors.password?((0,s.wg)(),(0,s.iD)("small",Ro,(0,y.zw)(r.errors.password[0]),1)):(0,s.kq)("",!0),(0,s.wy)((0,s._)("input",{type:"password",id:"typePasswordX",class:"form-control form-control-lg","onUpdate:modelValue":t[2]||(t[2]=e=>r.userRegister.password=e)},null,512),[[a.nr,r.userRegister.password]]),Io]),(0,s._)("div",Mo,[r.errors.password_confirm?((0,s.wg)(),(0,s.iD)("small",Bo,(0,y.zw)(r.errors.password_confirm[0]),1)):(0,s.kq)("",!0),(0,s.wy)((0,s._)("input",{type:"password",id:"typePasswordX",class:"form-control form-control-lg","onUpdate:modelValue":t[3]||(t[3]=e=>r.userRegister.password_confirm=e)},null,512),[[a.nr,r.userRegister.password_confirm]]),Lo]),Uo],32)])])])])])])])}var jo={setup(){const e=(0,O.oR)(),t=(0,c.tv)(),o=(0,T.qj)({name:"",email:"",password:"",password_confirm:""});function a(){e.dispatch("auth/registerAction",{data:o,router:t})}const r=(0,s.Fl)((()=>e.state.auth.messageErrRegister));return{userRegister:o,handleRegister:a,errors:r}}};const zo=(0,n.Z)(jo,[["render",Po]]);var To=zo;const Oo={class:"d-flex justify-content-center align-items-center",style:{height:"100vh"}};function Ho(e,t,o,a,r,l){return(0,s.wg)(),(0,s.iD)("div",Oo)}var No={setup(){const e=(0,T.iH)(!1);console.log("create");const t=(0,c.yj)(),o=(0,c.tv)(),a=(0,O.oR)(),r=t.fullPath,l=r.split("?")[1]||"";return(0,s.wF)((()=>{a.dispatch("auth/GoogleCallbackAction",{params:l,router:o})})),{loading:e}}};const Eo=(0,n.Z)(No,[["render",Ho]]);var $o=Eo;const Wo={id:"layout-wrapper"},Jo={class:"main-content"},qo={class:"page-content"},Vo={class:"container-fluid"},Zo=(0,s.uE)('<div class="row"><div class="col-12"><div class="page-title-box d-sm-flex align-items-center justify-content-between"><h4 class="mb-sm-0 font-size-18">File Manager</h4><div class="page-title-right"><ol class="breadcrumb m-0"><li class="breadcrumb-item"><a href="javascript: void(0);">Apps</a></li><li class="breadcrumb-item active">File Manager</li></ol></div></div></div></div>',1),Go={class:"d-xl-flex"},Xo={class:"w-100"},Yo={class:"d-md-flex"};function Ko(e,t,o,a,r,l){const n=(0,s.up)("the-header"),i=(0,s.up)("the-left-side-bar"),d=(0,s.up)("the-main-content");return(0,s.wg)(),(0,s.iD)("div",Wo,[(0,s.Wm)(n),(0,s._)("div",Jo,[(0,s._)("div",qo,[(0,s._)("div",Vo,[Zo,(0,s._)("div",Go,[(0,s._)("div",Xo,[(0,s._)("div",Yo,[(0,s.Wm)(i),(0,s.Wm)(d,{isShareView:!0})])])])])])])])}var Qo={name:"HomeView",components:{TheHeader:W,TheLeftSideBar:He,TheMainContent:Ht},setup(){(0,s.JJ)("isShowStar",!1)}};const ea=(0,n.Z)(Qo,[["render",Ko]]);var ta=ea;const oa=[{path:"/",name:"home",component:$t},{path:"/folders",component:$t},{path:"/folders/:id",name:"folderDetail",component:$t},{path:"/login",name:"login",component:po},{path:"/register",name:"register",component:To},{path:"/share/:token",name:"share",component:ta},{path:"/auth/google",name:"loginGoogle",component:$o}],aa=(0,c.p7)({history:(0,c.PO)("/"),routes:oa,linkActiveClass:"current"});var sa=aa,ra=o(1076),la={baseUrl:"https://hoangthao.site/api"};const na=ra.Z.create({baseURL:la.baseUrl,headers:{"X-Custom-Header":"foobar"}});na.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),na.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var ia=na;const da=e=>ia.post("/login",e),ca=()=>{const e=JSON.parse(localStorage.getItem("token"));return ia.post("/user/logout",null,{headers:{Authorization:`Bearer ${e}`}})},ua=e=>ia.post("/register",e),pa=()=>ra.Z.get("http://hoangthao.site/public/api/login/google"),ma=()=>({userLogin:null,messageErrRegister:""}),ha={loginUserMutations(e,{userLogin:t,router:o}){t.success&&(e.userLogin=t.data.user,window.localStorage.setItem("token",JSON.stringify(t.data.access_token)),window.localStorage.setItem("userLogin",JSON.stringify(t.data.user)),o.push({name:"home"}))},setUserMutations(e,t){e.userLogin=t},logoutMutation(e,t){e.userLogin=null,window.localStorage.removeItem("token"),window.localStorage.removeItem("userLogin"),t.push("/")},setErrorMutaions(e,t){e.messageErrRegister=t}},fa={async loginUserAction(e,{dataLogin:t,router:o}){try{const a=await da(t);e.commit("loginUserMutations",{userLogin:a,router:o})}catch(a){xe().fire({icon:"error",text:a.response.data.errors,showConfirmButton:!0})}},loadUserAction(e){const t=JSON.parse(localStorage.getItem("userLogin"));e.commit("setUserMutations",t)},async logoutAction(e,t){await ca(),e.commit("logoutMutation",t),location.reload()},async redirectGoogleLoginAction(){const e=await pa();window.location.href=e.data.data.url},async GoogleCallbackAction(e,{params:t,router:o}){fetch(`https://hoangthao.site/public/api/login/google/callback?${t}`,{headers:new Headers({accept:"application/json"})}).then((e=>{if(e.ok)return e.json();throw new Error("Something went wrong!")})).then((t=>{e.commit("loginUserMutations",{userLogin:t,router:o})})).catch((e=>{console.error(e)}))},async registerAction(e,{data:t,router:o}){try{const e=await ua(t);e.success&&xe().fire({title:"success",icon:"success",background:"#fff ",confirmButtonColor:"#3085d6",confirmButtonText:"OK"}).then((e=>{e.isConfirmed&&o.push("/login")}))}catch(a){e.commit("setErrorMutaions",a.response.data.errors)}}};var ga={namespaced:!0,state:ma,mutations:ha,actions:fa};const wa=(e,t)=>{const o=JSON.parse(localStorage.getItem("token"));return ia.post("/file",e,{headers:{Authorization:`Bearer ${o}`},onUploadProgress:t})},ba=e=>{const t=JSON.parse(localStorage.getItem("token"));return ia.delete("/file",{headers:{Authorization:`Bearer ${t}`},data:{fileIds:e}})},va=(e,t)=>{const o=JSON.parse(localStorage.getItem("token"));return ia.get("/download",{params:{fileIds:e,folderIds:t},headers:{Authorization:`Bearer ${o}`}})},ya=e=>{const t=new FormData;e.forEach((e=>{t.append("fileIds[]",e)}));const o=JSON.parse(localStorage.getItem("token"));return ia.post("/file/restore",t,{headers:{Authorization:`Bearer ${o}`}})},_a=(e,t)=>{const o=JSON.parse(localStorage.getItem("token"));return ia.put(`/file/${e}`,{is_starred:t},{headers:{Authorization:`Bearer ${o}`}})},Sa=()=>{const e=JSON.parse(localStorage.getItem("token"));return ia.get("/file/starred",{headers:{Authorization:`Bearer ${e}`}})},xa=e=>ia.get("/share",{params:{token:e}}),ka=()=>{const e=JSON.parse(localStorage.getItem("token"));return ia.get("/trash",{headers:{Authorization:`Bearer ${e}`}})},Fa=(e,t)=>{const o=JSON.parse(localStorage.getItem("token"));return ia.delete("/trash",{headers:{Authorization:`Bearer ${o}`},data:{folderIds:e,fileIds:t}})},Ca=(e,t)=>{const o=JSON.parse(localStorage.getItem("token"));return ia.post("/folder/upload",e,{headers:{Authorization:`Bearer ${o}`},onUploadProgress:t})},Aa=e=>{const t=JSON.parse(localStorage.getItem("token"));return ia.delete("/folder",{headers:{Authorization:`Bearer ${t}`},data:{FolderIds:e}})},Da=()=>{const e=JSON.parse(localStorage.getItem("token"));return ia.get("/folder",{headers:{Authorization:`Bearer ${e}`}})},Ra=e=>{const t=JSON.parse(localStorage.getItem("token"));return ia.get(`/folder/${e}`,{headers:{Authorization:`Bearer ${t}`}})},Ia=e=>{const t=JSON.parse(localStorage.getItem("token"));return ia.post("/folder",e,{headers:{Authorization:`Bearer ${t}`}})},Ma=e=>{const t=new FormData;e.forEach((e=>{t.append("folderIds[]",e)}));const o=JSON.parse(localStorage.getItem("token"));return ia.post("/folder/restore",t,{headers:{Authorization:`Bearer ${o}`}})},Ba=(e,t)=>{const o=JSON.parse(localStorage.getItem("token"));return ia.put(`/folder/${e}`,{is_starred:t},{headers:{Authorization:`Bearer ${o}`}})},La=()=>{const e=JSON.parse(localStorage.getItem("token"));return ia.get("/folder/starred",{headers:{Authorization:`Bearer ${e}`}})},Ua=()=>({listRootFile:[],listRootFolder:[]}),Pa={setfileListMutation(e,t){console.log(t),e.listRootFile=t.files?t.files:[],e.listRootFolder=t.folders?t.folders:[]},deleteFileMutation(e,t){e.listRootFile=e.listRootFile.filter((e=>!t.includes(e.id)))},deleteFolderMutation(e,t){e.listRootFolder=e.listRootFolder.filter((e=>!t.includes(e.id)))},changeDirectoryFolderMutation(e,{files:t,subFolders:o}){e.listRootFile=t,e.listRootFolder=o}},ja={async getRootFileAction(e){try{const t=await Da();e.commit("setfileListMutation",t.data)}catch(t){e.commit("setfileListMutation",[{files:[],folders:[]}])}},async uploadFileAction(e,{formData:t,uploadProgress:o,parentFolder:a}){try{console.log(t),void 0!==a.id&&t.append("parent_folder",a.id);const s=await wa(t,(e=>{const t=Math.round(e.loaded/e.total*100);o.value=t}));o.value=0,void 0==a.id?await e.dispatch("getRootFileAction"):await e.dispatch("showFolderAction",a.id),xe().fire({position:"bottom-start",icon:"success",title:s.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}catch(s){xe().fire({position:"bottom-start",icon:"error",title:s.response.data.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}},async createFolderAction(e,{formData:t,Swal:o}){try{const a=await Ia(t);void 0==t.parent_id?await e.dispatch("getRootFileAction"):await e.dispatch("showFolderAction",t.parent_id),o.fire({position:"bottom-start",icon:"success",title:a.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}catch(a){o.fire({position:"bottom-start",icon:"error",title:a.response.data.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}},async showFolderAction(e,t){try{const o=await Ra(t);o.success&&e.commit("changeDirectoryFolderMutation",o.data)}catch(o){console.log(o)}},async deleteFileAction(e,{files:t}){try{const o=t.map((e=>e.id)),a=await ba(o);e.commit("deleteFileMutation",o),xe().fire({position:"bottom-start",icon:"success",title:a.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}}),t.forEach((e=>e.isSelected=!1))}catch(o){xe().fire({icon:"error",text:o,showConfirmButton:!0})}},async uploadFolderAction(e,{formData:t,parentFolder:o,uploadProgress:a}){try{void 0!==o.id&&t.append("parent_id",o.id);const s=await Ca(t,(e=>{const t=Math.round(e.loaded/e.total*100);a.value=t}));void 0==o.id?await e.dispatch("getRootFileAction"):await e.dispatch("showFolderAction",o.id),a.value=0,xe().fire({position:"bottom-start",icon:"success",title:s.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}catch(s){xe().fire({position:"bottom-start",icon:"error",title:s.response.data.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}},async deleteFolderAction(e,{folders:t}){try{console.log(t);const o=t.map((e=>e.id)),a=await Aa(o);e.commit("deleteFolderMutation",o),xe().fire({position:"bottom-start",icon:"success",title:a.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}}),t.forEach((e=>e.isSelected=!1))}catch(o){xe().fire({icon:"error",title:o.response.data.message,showConfirmButton:!0})}},async getTrashAction(e){try{const t=await ka();e.commit("setfileListMutation",t.data)}catch(t){xe().fire({icon:"error",text:t.response.data.message,showConfirmButton:!0})}},async deleteFilePermanentlyAction(e,{files:t,folders:o,Swal:a}){try{const s=t.map((e=>e.id)),r=o.map((e=>e.id)),l=await Fa(r,s);await e.dispatch("getTrashAction"),t.forEach((e=>{e.isSelected=!1})),o.forEach((e=>{e.isSelected=!1})),a.fire({position:"bottom-start",icon:"success",title:l.message,showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}catch(s){a.fire({icon:"error",text:s.response.data.message,showConfirmButton:!0})}},async toggleStarFileAction(e,t){await _a(t.id,!t.is_starred),t.is_starred=!t.is_starred},async toggleStarFolderAction(e,t){await Ba(t.id,!t.is_starred),t.is_starred=!t.is_starred},async downloadAction(e,{files:t,folders:o}){try{const e=document.createElement("a");if(1==t.length&&o.length<=0)e.href=`https://hoangthao.site/api/download?fileIds[]=${t[0].id}`,e.click();else{const a=t.map((e=>e.id)),s=o.map((e=>e.id)),r=await va(a,s);e.href=r.data.url,e.click()}t.forEach((e=>e.isSelected=!1)),o.forEach((e=>e.isSelected=!1))}catch(a){xe().fire({icon:"error",text:a.response.data.errors,showConfirmButton:!0})}},async restoreFileAction(e,{files:t,folders:o}){try{const a=t.map((e=>e.id)),s=o.map((e=>e.id));a.length>0&&await ya(a),s.length>0&&await Ma(s),await e.dispatch("getTrashAction"),xe().fire({position:"bottom-start",icon:"success",title:"success",showConfirmButton:!1,timer:1e3,customClass:{popup:"small-popup"}})}catch(a){xe().fire({icon:"error",text:a.response.data.errors,showConfirmButton:!0})}},async getStarredAction(e){try{const t=await Sa(),o=await La();e.commit("setfileListMutation",{files:t.data,folders:o.data})}catch(t){xe().fire({icon:"error",text:t.response.data.errors,showConfirmButton:!0})}},async getFileShare(e,t){const o=await xa(t);e.commit("setfileListMutation",o.data)}};var za={namespaced:!0,state:Ua,mutations:Pa,actions:ja},Ta=(0,O.MT)({modules:{auth:ga,file:za}}),Oa=o(6553),Ha=o.n(Oa);const Na=(0,a.ri)(d);Na.use(Ta),Na.use(sa),Na.use(Ha()),Na.mount("#app")}},t={};function o(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,a,s,r){if(!a){var l=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],r=e[c][2];for(var n=!0,i=0;i<a.length;i++)(!1&r||l>=r)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(n=!1,r<l&&(l=r));if(n){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,s,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,r,l=a[0],n=a[1],i=a[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(s in n)o.o(n,s)&&(o.m[s]=n[s]);if(i)var c=i(o)}for(t&&t(a);d<l.length;d++)r=l[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},a=self["webpackChunkfile_management"]=self["webpackChunkfile_management"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(6296)}));a=o.O(a)})();
//# sourceMappingURL=app.f1fb526f.js.map